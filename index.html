<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ƒ∞yi ki doƒüdun K√ºbra!</title>
  <style>
    :root{
      --bg: #F4B4C4;   /* ‚úÖ tek ton toz pembe */
      --card: rgba(255,255,255,.18);
      --cardBorder: rgba(255,255,255,.30);
      --shadow: rgba(0,0,0,.25);
      --accent1:#ffd56a;
      --accent2:#ff9bd1;
      --ink:#1b1b1b;
    }

    *{ box-sizing:border-box; }

    /* ‚úÖ Arka plan her yerde tek renk + scroll a√ßƒ±k */
    html, body { height: 100%; }
    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#fff;

      background: var(--bg) !important;  /* ‚úÖ bordo/gradient kalmasƒ±n */
      overflow-x:hidden;
      overflow-y:auto;

      display:flex;
      justify-content:center;
      padding: 18px;
      padding-bottom: 120px; /* audio bar kapatmasƒ±n */
    }

    .card{
      width:min(860px, 96vw);
      padding: 18px;
      border-radius: 22px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: 0 18px 50px var(--shadow);
      backdrop-filter: blur(10px);
    }

    .view{ display:none; }
    .view.active{ display:block; }

    .header{
      text-align:center;
      margin-bottom: 10px;
    }
    .header h1{
      margin: 0 0 6px;
      font-size: clamp(22px, 3.6vw, 38px);
      letter-spacing: .2px;
      color: #fff;
    }
    .header p{
      margin:0;
      opacity:.92;
      font-size: clamp(14px, 2.2vw, 18px);
    }

    /* ‚úÖ Giri≈ü ekranƒ±: Foto √ºstte, mesaj altta (kitap formatƒ± yok) */
    .introStack{
      display:flex;
      flex-direction:column;
      gap: 14px;
      margin-top: 10px;
    }

    .panel{
      background: var(--card);
      border: 1px solid var(--cardBorder);
      border-radius: 18px;
      box-shadow: 0 12px 30px rgba(0,0,0,.18);
      overflow:hidden;
    }

    .photoBox{
      width: 100%;
      height: min(58vh, 520px);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 12px;
      background: rgba(255,255,255,.14);
    }

    /* ‚úÖ Foto KIRPILMAZ: contain + d√∂nd√ºrme sola */
    .photoBox img{
      width: 100%;
      height: 100%;
      object-fit: contain;          /* ‚úÖ tam g√∂r√ºns√ºn */
      transform: rotate(-90deg);    /* ‚úÖ 90¬∞ sola */
      transform-origin: center;
      border-radius: 14px;
      background: rgba(255,255,255,.55); /* bo≈üluk kalƒ±rsa ho≈ü dursun */
    }

    .msgBox{
      padding: 18px;
      color: rgba(0,0,0,.88);
      background: rgba(255,255,255,.65);
    }
    .msgBox h2{
      margin: 0 0 10px;
      font-size: clamp(18px, 2.8vw, 26px);
      color: rgba(0,0,0,.88);
    }
    .msgBox p{
      margin:0;
      font-size: clamp(14px, 2.2vw, 18px);
      line-height: 1.6;
      color: rgba(0,0,0,.78);
    }

    .controls{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 14px;
    }

    button{
      border:0;
      padding: 12px 16px;
      border-radius: 14px;
      font-weight: 800;
      cursor:pointer;
      color:#111;
      background: linear-gradient(135deg, var(--accent1), var(--accent2));
      box-shadow: 0 10px 24px rgba(0,0,0,.22);
      transition: transform .08s ease;
    }
    button:active{ transform: translateY(1px) scale(.99); }

    .ghost{
      background: rgba(255,255,255,.20);
      color:#fff;
      border: 1px solid rgba(255,255,255,.30);
    }
    .mini{ padding: 10px 14px; }

    /* Bottom audio bar */
    .audioBar{
      position: fixed;
      left: 50%;
      bottom: 14px;
      transform: translateX(-50%);
      display:flex;
      gap:10px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,.28);
      border: 1px solid rgba(255,255,255,.16);
      backdrop-filter: blur(10px);
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
      z-index: 20;
    }
    .audioBar span{
      font-size: 13px;
      opacity:.92;
      white-space: nowrap;
    }

    /* Autoplay blocked overlay */
    .autoplayOverlay{
      position: fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.55);
      z-index: 50;
      padding: 18px;
    }
    .autoplayOverlay.active{ display:flex; }
    .autoplayCard{
      width: min(520px, 92vw);
      padding: 18px;
      border-radius: 18px;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.22);
      backdrop-filter: blur(12px);
      box-shadow: 0 22px 60px rgba(0,0,0,.35);
      text-align:center;
      color:#fff;
    }
    .autoplayCard h3{ margin: 0 0 6px; font-size: 18px; }
    .autoplayCard p{ margin: 0 0 12px; opacity:.92; }

    /* Cake (aynƒ± kaldƒ±) */
    .cakeWrap{
      display:flex;
      justify-content:center;
      margin: 10px auto 8px;
      position:relative;
      height: 280px;
    }
    .cake{
      position:relative;
      width: 280px;
      height: 220px;
      transform: translateY(20px);
    }
    .plate{
      position:absolute; left:50%; transform:translateX(-50%);
      bottom:0;
      width: 320px; height: 26px;
      border-radius: 999px;
      background: rgba(255,255,255,.18);
      filter: blur(.2px);
    }
    .layer{
      position:absolute; left:50%; transform:translateX(-50%);
      width: 260px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.18);
    }
    .layer.top{ top: 64px; height: 56px; background: linear-gradient(180deg, #ffb3d9, #ff7fbf); }
    .layer.mid{ top: 114px; height: 62px; background: linear-gradient(180deg, #ffe6a6, #ffcc4d); }
    .layer.bot{ top: 168px; height: 64px; background: linear-gradient(180deg, #a7e4ff, #4fb9ff); }

    .icing{
      position:absolute; left:50%; transform:translateX(-50%);
      top: 54px;
      width: 270px; height: 36px;
      border-radius: 999px;
      background: rgba(255,255,255,.22);
      box-shadow: inset 0 -10px 18px rgba(0,0,0,.08);
    }
    .drip{
      position:absolute; top: 78px;
      width: 18px; height: 38px;
      background: rgba(255,255,255,.22);
      border-radius: 0 0 18px 18px;
      filter: blur(.1px);
      box-shadow: inset 0 -8px 12px rgba(0,0,0,.06);
    }
    .drip:nth-child(1){ left: 30px; height: 42px; }
    .drip:nth-child(2){ left: 88px; height: 30px; }
    .drip:nth-child(3){ left: 150px; height: 46px; }
    .drip:nth-child(4){ left: 210px; height: 34px; }

    .candle{
      position:absolute; left:50%; transform:translateX(-50%);
      top: 16px;
      width: 18px; height: 70px;
      border-radius: 10px;
      background: repeating-linear-gradient(45deg, #fff 0 8px, #ff5aa5 8px 16px);
      border: 1px solid rgba(0,0,0,.15);
      box-shadow: 0 10px 18px rgba(0,0,0,.18);
    }
    .wick{
      position:absolute; left:50%; transform:translateX(-50%);
      top: -10px;
      width: 3px; height: 12px;
      background:#2a2a2a;
      border-radius: 2px;
    }
    .flame{
      position:absolute;
      left:50%; transform:translateX(-50%);
      top:-34px;
      width: 28px; height: 38px;
      background: radial-gradient(circle at 50% 60%, #fff7b0 0 30%, #ffb300 55%, #ff5a00 80%);
      border-radius: 50%;
      filter: drop-shadow(0 0 18px rgba(255,200,60,.8));
      transform-origin: 50% 90%;
      animation: flicker .12s infinite alternate ease-in-out;
    }
    @keyframes flicker{
      from { transform: translateX(-50%) rotate(-2deg) scaleY(1.02); opacity:.95; }
      to   { transform: translateX(-50%) rotate( 2deg) scaleY(.98); opacity:1; }
    }
    .flame.off{ opacity:0; animation:none; filter:none; }

    /* Confetti */
    .confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index: 10;
    }
    .piece{
      position:absolute;
      top:-10px;
      width:10px; height:14px;
      opacity:.9;
      transform: rotate(0deg);
      animation: fall linear forwards;
    }
    @keyframes fall{
      to{ transform: translateY(110vh) rotate(720deg); }
    }
  </style>
</head>
<body>
  <div class="confetti" id="confetti"></div>

  <div class="autoplayOverlay" id="autoplayOverlay" aria-hidden="true">
    <div class="autoplayCard">
      <h3>üîä M√ºziƒüi ba≈ülatmak i√ßin bir dokunu≈ü gerekiyor</h3>
      <p>Tarayƒ±cƒ± ses i√ßin izin istiyor. A≈üaƒüƒ±ya basƒ±nca ≈üarkƒ± ba≈ülayacak.</p>
      <button id="startAudioBtn">M√ºziƒüi Ba≈ülat üéµ</button>
    </div>
  </div>

  <main class="card" role="main">

    <!-- VIEW 1 -->
    <section class="view active" id="viewBook">
      <div class="header">
        <h1>Doƒüum G√ºn√ºn Kutlu Olsun K√ºbra! üéâ</h1>
      </div>

      <div class="introStack">
        <div class="panel">
          <div class="photoBox">
            <img id="bookPhoto" alt="Fotoƒüraf" src="Snapchat-3435158.jpg" />
          </div>
        </div>

        <div class="panel msgBox">
          <h2>ƒ∞yi ki doƒüdunnn üíñ</h2>
          <p>
            Doƒüum g√ºn√ºn kutlu olsun K√ºbra, iyi ki doƒüdunnn.
            Yeni ya≈üƒ±n mutluluk ve saƒülƒ±k dolu olsun.
            Birlikte ge√ßirdiƒüimiz 8 yƒ±lƒ±n her anƒ± √ßok g√ºzeldi,
            daha nice yƒ±llarƒ± beraber ge√ßirelimm.
          </p>
        </div>
      </div>

      <div class="controls">
        <button id="goCakeBtn">Pastaya ge√ß üéÇ</button>
        <button id="burstBtn" class="ghost">Konfeti patlat ‚ú®</button>
      </div>
    </section>

    <!-- VIEW 2 -->
    <section class="view" id="viewCake">
      <div class="header">
        <h1>üéÇ K√ºbra i√ßin pasta zamanƒ±!</h1>
        <p>Mumu √ºfle ‚ú®</p>
      </div>

      <section class="cakeWrap" aria-label="Doƒüum g√ºn√º pastasƒ±">
        <div class="cake" role="img" aria-label="Mumlu doƒüum g√ºn√º pastasƒ±">
          <div class="candle">
            <div class="wick"></div>
            <div class="flame" id="flame"></div>
          </div>

          <div class="icing">
            <div class="drip"></div><div class="drip"></div><div class="drip"></div><div class="drip"></div>
          </div>

          <div class="layer top"></div>
          <div class="layer mid"></div>
          <div class="layer bot"></div>
          <div class="plate"></div>
        </div>
      </section>

      <div class="controls">
        <button id="blowBtn" class="ghost">Mumu S√∂nd√ºr üí®</button>
        <button id="backBookBtn">Geri d√∂n ‚Ü©Ô∏è</button>
      </div>
    </section>

    <audio id="birthdaySong" src="dogum-gunu-kubra.mp3" preload="auto" loop></audio>
  </main>

  <div class="audioBar" aria-label="M√ºzik kontrol √ßubuƒüu">
    <button class="mini ghost" id="toggleMusicBtn">‚è∏ Durdur</button>
    <span id="musicStatus">≈ûarkƒ± √ßalƒ±yor‚Ä¶</span>
  </div>

  <script>
    const BOOK_PHOTO = "Snapchat-3435158.jpg";
    const AUDIO_SRC  = "dogum-gunu-kubra.mp3";

    const confettiRoot = document.getElementById("confetti");
    const flame = document.getElementById("flame");

    const viewBook = document.getElementById("viewBook");
    const viewCake = document.getElementById("viewCake");

    const goCakeBtn = document.getElementById("goCakeBtn");
    const backBookBtn = document.getElementById("backBookBtn");
    const burstBtn = document.getElementById("burstBtn");

    const song = document.getElementById("birthdaySong");
    const toggleMusicBtn = document.getElementById("toggleMusicBtn");
    const musicStatus = document.getElementById("musicStatus");

    const autoplayOverlay = document.getElementById("autoplayOverlay");
    const startAudioBtn = document.getElementById("startAudioBtn");

    const bookPhoto = document.getElementById("bookPhoto");
    bookPhoto.src = BOOK_PHOTO;
    song.src = AUDIO_SRC;

    function burstConfetti(count = 140) {
      for (let i = 0; i < count; i++) {
        const p = document.createElement("div");
        p.className = "piece";
        p.style.left = Math.random() * 100 + "vw";
        p.style.animationDuration = (Math.random() * 1.8 + 1.6) + "s";
        p.style.animationDelay = (Math.random() * 0.2) + "s";
        p.style.borderRadius = (Math.random() > 0.5 ? "2px" : "999px");
        p.style.background = `hsl(${Math.floor(Math.random() * 360)}, 90%, 60%)`;
        p.style.transform = `rotate(${Math.random() * 360}deg)`;
        p.style.width = (Math.random() * 8 + 6) + "px";
        p.style.height = (Math.random() * 12 + 8) + "px";
        confettiRoot.appendChild(p);
        setTimeout(() => p.remove(), 4000);
      }
    }

    function setFlame(on) {
      flame.classList.toggle("off", !on);
      if (!on) burstConfetti(180);
    }

    function showView(which) {
      if (which === "cake") {
        viewBook.classList.remove("active");
        viewCake.classList.add("active");
        burstConfetti(120);
      } else {
        viewCake.classList.remove("active");
        viewBook.classList.add("active");
      }
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function syncMusicUI() {
      const playing = !song.paused;
      toggleMusicBtn.textContent = playing ? "‚è∏ Durdur" : "‚ñ∂Ô∏è Ba≈ülat";
      musicStatus.textContent = playing ? "≈ûarkƒ± √ßalƒ±yor‚Ä¶" : "≈ûarkƒ± durdu.";
    }

    async function tryAutoplay() {
      try {
        song.currentTime = 0;
        await song.play();
        syncMusicUI();
      } catch {
        autoplayOverlay.classList.add("active");
        autoplayOverlay.setAttribute("aria-hidden", "false");
        syncMusicUI();
      }
    }

    async function startAudioFromUserGesture() {
      try {
        await song.play();
        autoplayOverlay.classList.remove("active");
        autoplayOverlay.setAttribute("aria-hidden", "true");
        syncMusicUI();
        burstConfetti(120);
      } catch {
        alert("Ses ba≈ülatƒ±lamadƒ±. Telefon sessizde olmasƒ±n ve tekrar dene.");
      }
    }

    window.addEventListener("load", () => {
      setFlame(true);
      burstConfetti(60);
      tryAutoplay();
    });

    startAudioBtn.addEventListener("click", startAudioFromUserGesture);

    toggleMusicBtn.addEventListener("click", async () => {
      if (song.paused) await startAudioFromUserGesture();
      else { song.pause(); syncMusicUI(); }
    });

    goCakeBtn.addEventListener("click", () => showView("cake"));
    backBookBtn.addEventListener("click", () => showView("book"));
    burstBtn.addEventListener("click", () => burstConfetti(240));

    document.getElementById("blowBtn").addEventListener("click", () => setFlame(false));

    document.querySelector(".cake").addEventListener("click", () => {
      const off = flame.classList.contains("off");
      setFlame(off);
    });

    song.addEventListener("play", syncMusicUI);
    song.addEventListener("pause", syncMusicUI);
  </script>
</body>
</html>
